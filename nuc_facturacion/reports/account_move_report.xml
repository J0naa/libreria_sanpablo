<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="report_invoice_replace_header_block"
              inherit_id="account.report_invoice_document"
              priority="300">

        <!-- REEMPLAZAR EL PRIMER ROW (CLIENTE / SHIPPING) -->
        <xpath expr="(//t[@t-call='web.external_layout']//div[@class='row'])[1]"
               position="replace">

            <div class="row mb-3">

                <!-- ================= CLIENTE ================= -->
                <div class="col-6">

                    <strong>Cliente</strong>
                    <address class="mb-1"
                             t-field="o.partner_id"
                             t-options="{'widget':'contact','fields':['address','name'],'no_marker':True}"/>

                    <div t-if="o.partner_id.vat">
                        <strong>NIT:</strong>
                        <span t-field="o.partner_id.vat"/>
                    </div>

                </div>

                <!-- ================= DTE ================= -->
                <div class="col-6"
                     t-if="o.move_type == 'out_invoice'"
                     style="
                        background:#f5f7f8;
                        border-left:4px solid var(--o-company-primary-color);
                        padding:10px 12px;
                        font-size:12px;
                     ">

                    <strong>Datos de Facturación Electrónica (DTE)</strong>

                    <div class="mt-1">
                        <strong>Serie:</strong>
                        <span t-esc="o.gt_dte_serie or '-'"/>
                    </div>

                    <div>
                        <strong>Número:</strong>
                        <span t-esc="o.gt_dte_numero or '-'"/>
                    </div>

                    <div>
                        <strong>Autorización:</strong>
                        <span t-esc="o.gt_dte_auth_number or '-'"/>
                    </div>

                    <div>
                        <strong>Fecha envío:</strong>
                        <span t-esc="o.gt_fecha_envio or '-'"/>
                    </div>

                    <hr style="margin:6px 0;"/>

                    <div style="font-size:11px; font-style:italic;">
                        Este documento es una representación impresa de un
                        Documento Tributario Electrónico
                    </div>

                    <div class="mt-1">
                        <strong>Certificador:</strong><br/>
                        DIGIFACT SERVICIOS, SOCIEDAD ANÓNIMA<br/>
                        <strong>NIT:</strong> 7745482-0
                    </div>

                </div>

            </div>

        </xpath>

    </template>

</odoo>
