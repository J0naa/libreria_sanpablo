<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="report_invoice_client_and_dte"
              inherit_id="account.report_invoice_document"
              priority="250">

        <!-- REEMPLAZA EL BLOQUE VAT DEL CLIENTE -->
        <xpath expr="//div[@id='partner_vat_no_shipping']
                      | //div[@id='partner_vat_address_same_as_shipping']
                      | //div[@id='partner_vat_address_not_same_as_shipping']"
               position="replace">

            <div class="row mt-1">

                <!-- ================= CLIENTE ================= -->
                <div class="col-6">

                    <address class="mb-0"
                             t-field="o.partner_id"
                             t-options="{'widget':'contact','fields':['address','name'],'no_marker':True}"/>

                    <div t-if="o.partner_id.vat" class="mt-1">
                        <strong>NIT:</strong>
                        <span t-field="o.partner_id.vat"/>
                    </div>

                </div>

                <!-- ================= DTE ================= -->
                <div class="col-6"
                     t-if="o.move_type == 'out_invoice'"
                     style="
                        background:#f5f7f8;
                        border-left:4px solid var(--o-company-primary-color);
                        padding:8px 10px;
                        font-size:12px;
                     ">

                    <strong>Datos de Facturación Electrónica (DTE)</strong>

                    <div class="mt-1">
                        <strong>Serie:</strong>
                        <span t-esc="o.gt_dte_serie or '-'"/>
                    </div>

                    <div>
                        <strong>Número:</strong>
                        <span t-esc="o.gt_dte_numero or '-'"/>
                    </div>

                    <div>
                        <strong>Autorización:</strong>
                        <span t-esc="o.gt_dte_auth_number or '-'"/>
                    </div>

                    <div>
                        <strong>Fecha envío:</strong>
                        <span t-esc="o.gt_fecha_envio or '-'"/>
                    </div>

                    <div class="mt-2"
                         style="font-size:11px; font-style:italic; color:#555;">
                        Este documento es una representación impresa de un
                        Documento Tributario Electrónico
                    </div>

                </div>

            </div>

        </xpath>

    </template>

</odoo>
